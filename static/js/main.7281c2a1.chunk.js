(this.webpackJsonpchmkms=this.webpackJsonpchmkms||[]).push([[0],{120:function(e,t,c){},129:function(e,t,c){},130:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(39),r=c.n(a),s=c(43),i=c.n(s),o=c(37),l=c(62),u=c(106),j=c(57),d=c(86),b=c(149),h=c(144),m=c(150),O=c(53),f=c(143),p=c(146),x=c(145),v=c(147),k=(c(120),c(121),c(5)),g=function(e){return"https://chmkms-demo.herokuapp.com/api/live/?accessToken=".concat(e,"&userAgent=").concat(navigator.userAgent)},w=function(e){return"https://chmkms-demo.herokuapp.com/api/live/logout?accessToken=".concat(e)},I=function(e,t){return"http://chmkms-demo.herokuapp.com/api/class/".concat(t,"/recorded-videos?accessToken=").concat(e)};function S(){return(S=Object(d.a)(i.a.mark((function e(t,c){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(g(t));case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,c.map((function(e){return e(a.data)})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function y(e){return e&&e.length?e.reduce((function(e,t){return Object(j.a)(Object(j.a)({},e),{},Object(l.a)({},t.subject,e[t.subject]?[].concat(Object(u.a)(e[t.subject]),[t]):[t]))}),[]):[]}function C(){return(C=Object(d.a)(i.a.mark((function e(t,c,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(I(t,c));case 3:return a=e.sent,e.next=6,a.json();case 6:r=e.sent,n(y(r.data)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var N=1,T=-1;var E=function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)({}),s=Object(o.a)(r,2),l=s[0],u=s[1],g=Object(n.useState)(!1),I=Object(o.a)(g,2),y=I[0],E=I[1],A=Object(n.useState)(null),H=Object(o.a)(A,2),L=H[0],F=H[1],M=Object(n.useState)(null),P=Object(o.a)(M,2),U=P[0],B=P[1],J=Object(n.useState)(!0),D=Object(o.a)(J,2),K=D[0],R=D[1],V=Object(n.useState)(!1),Y=Object(o.a)(V,2),q=Y[0],z=Y[1];Object(n.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("accessToken");e?a(e):localStorage.getItem("accessToken")?a(localStorage.getItem("accessToken")):a(window.prompt("Enter Access Token"))}),[]),Object(n.useEffect)((function(){c&&(localStorage.setItem("accessToken",c),function(e,t){S.apply(this,arguments)}(c,[u,B]))}),[c]);var G=l.standard,Q=l.subject,W=l.eligibility,X=l.message,Z=l.name,$=l.userAgent,_=l.videoUrl,ee=l.meetingLink;Object(n.useEffect)((function(){(G||Q)&&(document.title="CHMKMS | ".concat(G," | ").concat(Q))}),[G,Q]),Object(n.useEffect)((function(){if(N===W){if($===navigator.userAgent)return;R(!1)}else T===W&&R(!1)}),[$,K,W]),Object(n.useEffect)((function(){G&&c&&K&&function(e,t,c){C.apply(this,arguments)}(c,G,F)}),[G,c,K]);var te=function(){return E(!1)},ce=function(){return z(!1)};function ne(e){u((function(t){return Object(j.a)(Object(j.a)({},t),e)})),te()}function ae(){return(ae=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(w(c));case 2:return t=e.sent,e.next=5,t.json();case 5:return e.sent&&(a(),ce(),localStorage.removeItem("accessToken"),window.location.search=""),e.abrupt("return");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(b.a.Pushable,{children:[Object(k.jsxs)(b.a,{as:h.a,animation:"overlay",icon:"labeled",inverted:!0,onHide:te,vertical:!0,visible:y,children:[U&&U.videoUrl?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(h.a.Item,{children:Object(k.jsx)(m.a,{inverted:!0,as:"b",className:"red",children:"LIVE"})}),Object(k.jsxs)(h.a.Item,{name:"video",onClick:function(){return ne(U)},children:[Object(k.jsx)(h.a.Header,{as:"a",children:U.name}),Object(k.jsx)("p",{children:U.description})]})]}):null,L&&Object.keys(L).sort().map((function(e){return Object(k.jsxs)(h.a.Item,{children:[Object(k.jsx)(h.a.Item,{children:Object(k.jsxs)("div",{children:[Object(k.jsx)(O.a,{name:"book"}),Object(k.jsx)(m.a,{inverted:!0,as:"b",className:"blue",children:e})," \xa0",Object(k.jsx)(O.a,{name:"book"})]})}),L[e].map((function(e){return Object(k.jsxs)(h.a.Item,{name:"video",onClick:function(){return ne(e)},children:[Object(k.jsx)(h.a.Header,{as:"a",children:e.name}),Object(k.jsx)("p",{children:e.description})]},e.id)}))]},e)}))]}),Object(k.jsxs)(b.a.Pusher,{dimmed:y,className:"full-screen",children:[Object(k.jsxs)("div",{className:"full-screen",children:[Object(k.jsx)("div",{className:"full-width",children:Object(k.jsxs)(h.a,{inverted:!0,className:"scrollable-x",children:[Object(k.jsx)(h.a.Item,{name:"list",onClick:function(){return E(!0)},children:Object(k.jsx)(O.a,{name:"list"})}),Object(k.jsx)(h.a.Item,{as:"b",header:!0,children:G}),Object(k.jsx)(h.a.Item,{as:"b",header:!0,children:Q}),Object(k.jsx)(h.a.Item,{as:"b",header:!0,children:Z}),Object(k.jsx)(h.a.Item,{icon:"video camera",position:"right",onClick:function(){ee?window.open(ee):window.alert("Meeting link unavailable")},header:!0}),Object(k.jsx)(h.a.Item,{icon:"log out",onClick:function(){return z(!0)},header:!0})]})}),Object(k.jsx)("div",{className:"full-screen",children:K&&_?Object(k.jsx)("div",{className:"iframe-full-screen",children:Object(k.jsx)("iframe",{frameBorder:"0",title:"Live class",width:"100%",height:"100%",src:_,allowFullScreen:"false"})}):X?Object(k.jsx)(f.a,{textAlign:"center",inverted:!0,children:Object(k.jsx)(p.a,{children:X})}):null})]}),Object(k.jsxs)(x.a,{onClose:ce,open:q,children:[Object(k.jsx)(x.a.Header,{children:"Help"}),Object(k.jsx)(x.a.Content,{image:!0,children:Object(k.jsx)(x.a.Description,{children:"Logout from this device, to view classes from another device"})}),Object(k.jsxs)(x.a.Actions,{children:[Object(k.jsx)(v.a,{onClick:ce,children:"No, I want to watch live class here."}),Object(k.jsx)(v.a,{color:"red",onClick:function(){return ae.apply(this,arguments)},negative:!0,children:"Yes, log me out."})]})]})]})]})})};c(129);r.a.render(Object(k.jsx)(E,{}),document.getElementById("root"))}},[[130,1,2]]]);
//# sourceMappingURL=main.7281c2a1.chunk.js.map