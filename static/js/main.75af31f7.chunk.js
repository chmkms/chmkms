(this.webpackJsonpchmkms=this.webpackJsonpchmkms||[]).push([[0],{120:function(e,t,c){},129:function(e,t,c){},130:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(39),r=c.n(a),s=c(43),i=c.n(s),o=c(37),u=c(62),j=c(106),l=c(57),b=c(86),d=c(149),h=c(144),O=c(150),m=c(53),f=c(143),p=c(146),x=c(145),v=c(147),k=(c(120),c(121),c(5)),g=function(e){return"https://chmkms-demo.herokuapp.com/api/live/?accessToken=".concat(e,"&userAgent=").concat(navigator.userAgent)},w=function(e){return"https://chmkms-demo.herokuapp.com/api/live/logout?accessToken=".concat(e)},I=function(e,t){return"http://chmkms-demo.herokuapp.com/api/class/".concat(t,"/recorded-videos?accessToken=").concat(e)};function y(){return(y=Object(b.a)(i.a.mark((function e(t,c){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(g(t));case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,c.map((function(e){return e(a.data)})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function S(e){return e&&e.length?e.reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(u.a)({},t.subject,e[t.subject]?[].concat(Object(j.a)(e[t.subject]),[t]):[t]))}),[]):[]}function T(){return(T=Object(b.a)(i.a.mark((function e(t,c,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(I(t,c));case 3:return a=e.sent,e.next=6,a.json();case 6:r=e.sent,n(S(r.data)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var C=1,E=-1;var A=function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)({}),s=Object(o.a)(r,2),u=s[0],j=s[1],g=Object(n.useState)(!1),I=Object(o.a)(g,2),S=I[0],A=I[1],H=Object(n.useState)(null),L=Object(o.a)(H,2),P=L[0],U=L[1],F=Object(n.useState)(null),J=Object(o.a)(F,2),M=J[0],N=J[1],B=Object(n.useState)(!0),D=Object(o.a)(B,2),K=D[0],R=D[1],V=Object(n.useState)(!1),Y=Object(o.a)(V,2),q=Y[0],z=Y[1];Object(n.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("accessToken");e?a(e):localStorage.getItem("accessToken")?a(localStorage.getItem("accessToken")):a(window.prompt("Enter Access Token"))}),[]),Object(n.useEffect)((function(){c&&(localStorage.setItem("accessToken",c),function(e,t){y.apply(this,arguments)}(c,[j,N]))}),[c]);var G=u.description,Q=u.standard,W=u.subject,X=u.eligibility,Z=u.message,$=u.name,_=u.userAgent,ee=u.videoUrl;Object(n.useEffect)((function(){(Q||W)&&(document.title="CHMKMS | ".concat(Q," | ").concat(W))}),[Q,W]),Object(n.useEffect)((function(){if(C===X){if(_===navigator.userAgent)return;R(!1)}else E===X&&R(!1)}),[_,K,X]),Object(n.useEffect)((function(){Q&&c&&K&&function(e,t,c){T.apply(this,arguments)}(c,Q,U)}),[Q,c,K]);var te=function(){return A(!1)},ce=function(){return z(!1)};function ne(e){j((function(t){return Object(l.a)(Object(l.a)({},t),e)})),te()}function ae(){return(ae=Object(b.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(w(c));case 2:return t=e.sent,e.next=5,t.json();case 5:return e.sent&&(a(),ce(),localStorage.removeItem("accessToken"),window.location.search=""),e.abrupt("return");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(d.a.Pushable,{children:[Object(k.jsxs)(d.a,{as:h.a,animation:"overlay",icon:"labeled",inverted:!0,onHide:te,vertical:!0,visible:S,children:[M&&M.videoUrl?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(h.a.Item,{children:Object(k.jsx)(O.a,{inverted:!0,as:"b",className:"red",children:"LIVE"})}),Object(k.jsxs)(h.a.Item,{name:"video",onClick:function(){return ne(M)},children:[Object(k.jsx)(h.a.Header,{as:"a",children:M.name}),Object(k.jsx)("p",{children:M.description})]})]}):null,P&&Object.keys(P).sort().map((function(e){return Object(k.jsxs)(h.a.Item,{children:[Object(k.jsx)(h.a.Item,{children:Object(k.jsxs)("div",{children:[Object(k.jsx)(m.a,{name:"book"}),Object(k.jsx)(O.a,{inverted:!0,as:"b",className:"blue",children:e})," \xa0",Object(k.jsx)(m.a,{name:"book"})]})}),P[e].map((function(e){return Object(k.jsxs)(h.a.Item,{name:"video",onClick:function(){return ne(e)},children:[Object(k.jsx)(h.a.Header,{as:"a",children:e.name}),Object(k.jsx)("p",{children:e.description})]},e.id)}))]},e)}))]}),Object(k.jsxs)(d.a.Pusher,{dimmed:S,style:{height:"100%"},children:[Object(k.jsxs)(f.a,{fluid:!0,style:{height:"100%"},children:[Object(k.jsx)(f.a,{fluid:!0,children:Object(k.jsxs)(h.a,{inverted:!0,children:[Object(k.jsx)(h.a.Item,{name:"list",onClick:function(){return A(!0)},children:Object(k.jsx)(m.a,{name:"list"})}),Object(k.jsx)(h.a.Item,{as:"b",header:!0,children:Q}),Object(k.jsx)(h.a.Item,{as:"b",header:!0,children:W}),Object(k.jsx)(h.a.Item,{as:"b",header:!0,children:$}),Object(k.jsx)(h.a.Item,{as:"b",header:!0,children:G}),Object(k.jsx)(h.a.Item,{icon:"log out",position:"right",onClick:function(){return z(!0)},header:!0})]})}),Object(k.jsx)(f.a,{fluid:!0,style:{height:"100%"},children:K&&ee?Object(k.jsx)("iframe",{title:"Live class",width:"100%",height:"100%",src:ee}):Z?Object(k.jsx)(f.a,{textAlign:"center",inverted:!0,children:Object(k.jsx)(p.a,{children:Z})}):null})]}),Object(k.jsxs)(x.a,{onClose:ce,open:q,children:[Object(k.jsx)(x.a.Header,{children:"Help"}),Object(k.jsx)(x.a.Content,{image:!0,children:Object(k.jsx)(x.a.Description,{children:"Logout from this device, to view classes from another device"})}),Object(k.jsx)(x.a.Actions,{children:Object(k.jsx)(v.a,{color:"red",onClick:function(){return ae.apply(this,arguments)},negative:!0,children:"Yes, log me out."})})]})]})]})})};c(129);r.a.render(Object(k.jsx)(A,{}),document.getElementById("root"))}},[[130,1,2]]]);
//# sourceMappingURL=main.75af31f7.chunk.js.map